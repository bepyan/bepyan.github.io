---
title: Next.js ë¸”ë¡œê·¸ Image Optimization
description: Next.js static htmlì—ì„œ ì´ë¯¸ì§€ë¥¼ ê¸°ë˜¥ì°¨ê²Œ ì‚¬ìš©í•´ë³´ì!
tags:
  - next.js
  - Blog
  - image
  - optimization
draft: false
date: 2022-11-14
---

ê¸°ë³¸ì ìœ¼ë¡œ next/imageë¥¼ í™œìš©í•˜ë©´ ì´ë¯¸ì§€ë¥¼ ìµœì í™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
í•˜ì§€ë§Œ [static-html-export](https://nextjs.org/docs/advanced-features/static-html-export#unsupported-features) í™˜ê²½ì—ì„œëŠ” ì´ë¥¼ ì œê³µí•´ì£¼ì§€ ì•ŠëŠ”ë‹¤ê³  í•©ë‹ˆë‹¤.

[Custom Loader](https://nextjs.org/docs/basic-features/image-optimization#loaders)ë¥¼ í™œìš©í•´ì•¼í•œë‹¤ê³  í•˜ëŠ”ë° ~~ê°ˆ ê¸¸ì´ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤~~...  
ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë„ì›€ì„ ë°›ì•„ ë³´ë„ë¡ í•©ì‹œë‹¤!

âœ¨ [**next-export-optimize-images**](https://github.com/dc7290/next-export-optimize-images)

github starê°€ 100ê°œ ì •ë„ì¸ ì¡°ê¸ˆì€ ë¹ˆì•½í•œ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.  
í•˜ì§€ë§Œ ê¸°ì¡´ `next/image`ì˜ optionì— 100% í˜¸í™˜í•  ë§Œí¼ ê°•ë ¥í•˜ê³  ì ìš©í•˜ëŠ” ë°©ë²• ë˜í•œ ê°„í¸í•˜ê¸°ì— ì´ë¥¼ ì‚¬ìš©í•´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

ì•„ë˜ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•´ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤.

- Optimize images at build time.
- All options for `next/image` available
- Convert formats (png â†’ webp, etc.)
- Download external images locally.
- Using `sharp`, so it's fast.
- Cache prevents repeating the same optimization
- Support TypeScript
- Support `next/future/image`

---

## í™˜ê²½ ì„¸íŒ…í•˜ê¸°

[ê³µì‹ë¬¸ì„œ](https://next-export-optimize-images.vercel.app/docs/getting-started) ì°¸ê³ í•˜ë©´ ë˜ëŠ”ë° ì•„ë˜ ì„¤ì •íŒŒì¼ í•˜ë‚˜ë©´ ëì…ë‹ˆë‹¤ ğŸ«¢

`next.config.js`

```js
const withExportImages = require('next-export-optimize-images');

/** @type {import('next').NextConfig} */
const nextConfig = withExportImages({
  //...
});

module.exports = nextConfig;
```

`next export` ì´í›„ì— ë”°ë¡œ ìµœì í™” ë¹Œë“œë¥¼ ì‹¤í–‰í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

```json
{
  "scripts": {
    "build": "next build && next export && next-export-optimize-images"
  }
}
```

---

## ì‹¤í—˜ í•´ë³´ê¸°

[ê³µì‹ë¬¸ì„œ](https://next-export-optimize-images.vercel.app/docs/examples#set-the-placeholder)ëŒ€ë¡œ placeholder ì†ì„±ì„ ì§€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```tsx
import Image from 'next/image';

//...

<Image
  src="/forest.jpg"
  alt="forest"
  width={324}
  height={486}
  placeholder="blur"
  className="h-auto"
/>;
```

dev í™˜ê²½ì—ì„œì˜ ë³€í™˜ ê²°ê³¼

```html
<img
  alt="forest"
  srcset="/forest.jpg?width=384 1x, /forest.jpg?width=750 2x"
  src="/forest.jpg?width=750"
  width="324"
  height="486"
  decoding="async"
  data-nimg="1"
  class="h-auto"
  loading="lazy"
  style="color: transparent;"
/>
```

build í™˜ê²½ì—ì„œì˜ ë³€í™˜ ê²°ê³¼

```html
<img
  alt="forest"
  srcset="
    /_next/static/chunks/images/forest_384_75.jpg 1x,
    /_next/static/chunks/images/forest_750_75.jpg 2x
  "
  src="/_next/static/chunks/images/forest_750_75.jpg"
  width="324"
  height="486"
  decoding="async"
  data-nimg="1"
  class="h-auto"
  loading="lazy"
  style="color: transparent;"
/>
```

dev í™˜ê²½ì—ì„œëŠ” ì‚¬ì§„ ì›ë³¸ì„ ì‚¬ìš©í•˜ë©° buildë¥¼ ê±°ì¹œ í›„ 3000px ì´ìƒì˜ imageê°€ 700pxëŒ€ë¡œ ì˜ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤!

```javascript
// ë¡œë”© ì¤‘
style = "color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' viewBox='0 0 324 486'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage preserveAspectRatio='none' filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' href='/_next/static/chunks/images/forest_8_10.jpg'/%3E%3C/svg%3E")";

// ë¡œë”© ì™„ë£Œ
style = 'color: transparent;';
```

ì´ë¯¸ì§€ê°€ ë¡œë”©ë˜ê¸° ì „ì— `background-image`ë¡œ placeholderë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.  
í•˜ì§€ë§Œ blurëœ ì´ë¯¸ì§€ëŠ” ì˜ í‘œì‹œë˜ëŠ”ì§„ ì•ŠëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤...

![230107-164837](/images/posts/6-image-optimization/230107-164837.png)

ì–¸ì  ê°€ëŠ” ìƒˆë¡œ ì†ì„ ë´ì•¼í•  ê²ƒ ê°™êµ°ìš”...
